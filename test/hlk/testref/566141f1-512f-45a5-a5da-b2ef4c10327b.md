---
title: WindowsToGo Boot Test
Description: WindowsToGo Boot Test
ms.assetid: 5af5d730-2ea8-4942-96c8-21594ac73f20
author: sapaetsc-msft
ms.author: sapaetsc
ms.date: 08/28/17
ms.topic: article
ms.prod: windows-hardware
ms.technology: windows-oem
---

# WindowsToGo Boot Test

<conditional_block> <conditions> <docset value="standalone"></docset> </conditions>

>[!NOTE]
You can find the latest version of this test documentation on MSDN at the following link:

-   <xref hlink="http://msdn.microsoft.com/en-us/library/windows/hardware/5af5d730-2ea8-4942-96c8-21594ac73f20">http://msdn.microsoft.com/en-us/library/windows/hardware/5af5d730-2ea8-4942-96c8-21594ac73f20</b>


</conditional_block>

This test validates that the USB storage can be provisioned with a Windows image and the following requirements are met:

-   Boot into Windows from the device.

-   Operates at SuperSpeed when plugged into a USB 3.0 port.

-   Enter and resume from S3 sleep.

-   Enter and resume from S4 hibernate.

>[!NOTE]
This is a system-specific implementation of an existing test. For more information on this test, see <xref rid="p_hlk_test.19cf07d7-072b-4fba-b8c4-5104ad61b0a5">WindowsToGo Device Boot Test</b>.


## Test details

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><mark type="bullet_intro">Specifications</b></td>
<td><ul>
<li>System.Fundamentals.USBBoot.BootFromUSB</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Platforms</b></td>
<td><ul>
<li><tla rid="win_threshold_desktop"></tla> x86</li>
<li><tla rid="win_threshold_desktop"></tla> x64</li>
</ul></td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Supported Releases</b></td>
<td><ul>
<li><tla rid="win_10"></tla></li>
<li><tla rid="win_10_th2"></tla></li>
<li><tla rid="win_10_rs1"></tla></li>
<li>Windows 10, version 1703</li>
<li>Windows 10, version 1709</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Expected run time (in minutes)</b></td>
<td>45</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Category</b></td>
<td>Scenario</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Timeout (in minutes)</b></td>
<td>45</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Requires reboot</b></td>
<td>false</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Requires special configuration</b></td>
<td>true</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Type</b></td>
<td>automatic</td>
</tr>
</tbody>
</table>

## Additional documentation

Tests in this feature area might have additional documentation, including prerequisites, setup, and troubleshooting information, that can be found in the following topic(s):

-   <xref rid="p_hlk_test.system_fundamentals_additional_documentation">System.Fundamentals additional documentation</b>

## Running the test

The hardware requirements are as follows:

-   The device must be USB 3.0 and certified for Windows To Go.

-   The device under test must be plugged into a USB 3.0 port to run this test.

-   The computer running the test should have no other USB storage devices attached.

-   The computer running the test does not have an equal amount or more system memory than the WTG certified device (for example, if the system has 32Gb of RAM, you can't use a 32Gb WTG drive).

The software requirements are as follows:

-   User must copy a valid Windows Image (WIM) file to the test computer. It must include any drivers needed to use the systemâ€™s hardware.

## Troubleshooting

For generic troubleshooting of HLK test failures, see <xref rid="p_hlk.troubleshooting_windows_hlk_test_failures">Troubleshooting Windows HLK Test Failures</b>.

For troubleshooting information, see <xref rid="p_hlk_test.troubleshooting_devicestorage_testing">Troubleshooting Device.Storage Testing</b>.

If you cannot boot from the Windows To Go device, use the following to troubleshoot this issue:

-   Ensure that the Windows image does not include any 3rd party USB drivers.

-   Ensure that the system you are using to run this test has the latest firmware.

-   If boot was interrupted by an INACESSIBLE\_BOOT\_DEVICE stop error, the UFD likely became unresponsive after receiving a certain sequence of commands. Take a USB trace to determine what caused the UFD to become unresponsive.

-   If the system did not attempt to boot the Windows To Go drive, the UFD likely did not enumerate quickly enough for the system's firmware. Take a USB trace to determine what caused the system to abort its attempt to boot the UFD.

-   If you have taken these debugging steps and believe your device is behaving correctly, run the test again with a certified device and compare the results.

If the device cannot enter S3 sleep, your WIM image may not have the correct graphics drivers installed. Use the following steps to see what is blocking S3 sleep:

-   Provision a Windows To Go device with the same image you use with the test and then boot from it.

-   Open a command prompt, and the run the following command: **powercfg a**

-   Note which device is blocking S3 sleep, add the appropriate driver to the WIM file, and run the test again.

If the computer lost state when resuming from S3 sleep or S4 hibernate, this could mean that the computer lost power to the Windows To Go device before all of the data in its cache could be written.

If the computer resumes to the host operating system instead of the Windows To Go operating system from hibernation, the computer had a problem booting the Windows To Go device and the host computer was booted instead. Take a USB trace to determine what caused the computer to revert back to the host operating system.

If you receive Surprise Removal events during the test that were not caused from the Windows To Go device being unplugged and then plugged back in, the Windows To Go device may not be properly maintaining its link to the host operating system per the USB 3.0 specification or the Windows To Go device may not be properly saving all data to non-volatile memory when the system enters a sleep state. Take a USB trace to determine what caused the Surprise Removal events.

If the system successfully boots to the Windows To Go operating system, but appears to hang for an extended period of time, manually reboot the system. The following warning may be found in the Te.wtl log file for the 'Process Test Results' task:

**Warning: Something prevented the system from entering sleep (S3) or Connected Standby. When booted from the WTG drive open a command prompt and run "powercfg -a" and note what component is listed as blocking S3 or Connected Standby. This is usually the result of missing graphics drivers. Add any missing drivers for your machine to the WIM file you're using for this test.**

>[!NOTE]
If the logs show the test as passing after the manual reboot, it is acceptable to submit the results for certification with this warning in the logs.


## More information

## File list

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>File</th>
<th>Location</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>boottest.dll</p></td>
<td><p><placeholder>&lt;testbinroot&gt;</placeholder>\pw_device_logo\boottest.dll</p></td>
</tr>
<tr class="even">
<td><p>unattend.xml</p></td>
<td><p><placeholder>&lt;testbinroot&gt;</placeholder>\pw_device_logo\unattend.xml</p></td>
</tr>
<tr class="odd">
<td><p>pwrtest.exe</p></td>
<td><p><placeholder>&lt;testbinroot&gt;</placeholder>\pwrtest\pwrtest.exe</p></td>
</tr>
</tbody>
</table>

## Parameters

| Parameter name                                   | Parameter description                                                            |
|--------------------------------------------------|----------------------------------------------------------------------------------|
| <mark type="bullet_intro">LLU\_NetAccessOnly</b> |                                                                                  |
| <mark type="bullet_intro">LLU\_LclAdminUsr</b>   |                                                                                  |
| <mark type="bullet_intro">TestMode</b>           |                                                                                  |
| <mark type="bullet_intro">WimPath</b>            | Full path to a Windows Image file (WIM). Must be full Windows, not WinPE         |
| <mark type="bullet_intro">WimIndex</b>           | Image within the WIM to use. Should match host computer architecture (x86/amd64) |
| <mark type="bullet_intro">TAEFSource</b>         |                                                                                  |





