---
title: HBA API Test (LOGO)
Description: HBA API Test (LOGO)
ms.assetid: d6a71da6-14a0-4371-a62d-03630ee64274
author: sapaetsc-msft
ms.author: sapaetsc
ms.date: 08/28/17
ms.topic: article
ms.prod: windows-hardware
ms.technology: windows-oem
---

# HBA API Test (LOGO)

<conditional_block> <conditions> <docset value="standalone"></docset> </conditions>

>[!NOTE]
You can find the latest version of this test documentation on MSDN at the following link:

-   <xref hlink="http://msdn.microsoft.com/en-us/library/windows/hardware/d6a71da6-14a0-4371-a62d-03630ee64274">http://msdn.microsoft.com/en-us/library/windows/hardware/d6a71da6-14a0-4371-a62d-03630ee64274</b>


</conditional_block>

This test verifies the Microsoft Windows Management Instrumentation (WMI) interfaces that are implemented by a host bus adapter (HBA) driver for support of the Storage Networking Industry Association's Common HBA API.

>[!NOTE]
To qualify under the WindowsÂ® Certification program, Fibre Channel and SAS Storport miniport drivers and SCSI miniport drivers must support the HBA API.


## Test details

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><mark type="bullet_intro">Specifications</b></td>
<td><ul>
<li>Device.Storage.Controller.Fc.Interface</li>
<li>Device.Storage.Controller.Fcoe.Interface</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Platforms</b></td>
<td><ul>
<li><tla rid="win_threshold_desktop"></tla> x86</li>
<li><tla rid="win_threshold_desktop"></tla> x64</li>
<li><tla rid="win_threshold_server"></tla> x64</li>
</ul></td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Supported Releases</b></td>
<td><ul>
<li><tla rid="win_10"></tla></li>
<li><tla rid="win_10_th2"></tla></li>
<li><tla rid="win_10_rs1"></tla></li>
<li>Windows 10, version 1703</li>
<li>Windows 10, version 1709</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Expected run time (in minutes)</b></td>
<td>5</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Category</b></td>
<td>Compatibility</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Timeout (in minutes)</b></td>
<td>5</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Requires reboot</b></td>
<td>false</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Requires special configuration</b></td>
<td>false</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Type</b></td>
<td>automatic</td>
</tr>
</tbody>
</table>

## Additional documentation

Tests in this feature area might have additional documentation, including prerequisites, setup, and troubleshooting information, that can be found in the following topic(s):

-   <xref rid="p_hlk_test.device_storage_additional_documentation">Device.Storage additional documentation</b>

## Running the test

Before you run the test, complete the test setup as described in the test requirements: <xref rid="p_hlk_test.fibre_channel_adapter_testing_prerequisites">Fibre Channel Adapter Testing Prerequisites</b>

## Troubleshooting

For generic troubleshooting of HLK test failures, see <xref rid="p_hlk.troubleshooting_windows_hlk_test_failures">Troubleshooting Windows HLK Test Failures</b>.

For troubleshooting information, see <xref rid="p_hlk_test.troubleshooting_devicestorage_testing">Troubleshooting Device.Storage Testing</b>.

## More information

The HBA API test requires a Fibre Channel switch between the HBA and the storage devices that you are testing. The Fibre Channel switch must support the GIEL and GANXT specifications. Most switches that have been made in the past 10 years support these specifications.

The topology can any kind of fabric configuration, as long as a switch is present. For example, the simplest configuration is the following: \[TestMachine\]&lt;--&gt;\[FibreChannelSwitch\]&lt;--&gt;\[FibreChannelStorageArray\]

>[!NOTE]
The test uses a Microsoft Visual Basic script to query the HBAs WMI interfaces. For specific test cases, see the Assertions section. You can view the source of the test by opening the script file with a text editor.


The test first installs the schema for the HBA API on the computer and then starts the script.

## Command syntax

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>mofcomp -N:root\wmi hbaapi.bmf</strong></p></td>
<td><p>Installs the hbaapi.bmf file.</p></td>
</tr>
<tr class="even">
<td><p><strong>cscript hbatst.vbs &quot;[WDKDeviceID]&quot;</strong></p></td>
<td><p>Specifies the device to be tested.</p></td>
</tr>
</tbody>
</table>

## File list

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>File</th>
<th>Location</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>hbatst.vbs</p></td>
<td><p><placeholder>&lt;[testbinroot]&gt;</placeholder>\nttest\driverstest\storage\wdk\</p></td>
</tr>
<tr class="even">
<td><p>hbaapi.bmf</p></td>
<td><p><placeholder>&lt;[testbinroot]&gt;</placeholder>\nttest\\driverstest\storage\wdk\</p></td>
</tr>
</tbody>
</table>

## Parameters

| Parameter name                                   | Parameter description                      |
|--------------------------------------------------|--------------------------------------------|
| <mark type="bullet_intro">WDKDeviceID</b>        | Device ID of HBA to be tested.             |
| <mark type="bullet_intro">LLU\_LclAdminUsr</b>   | User account for running the test.         |
| <mark type="bullet_intro">LLU\_NetAccessOnly</b> | User account for accessing test fileshare. |
| <mark type="bullet_intro">WDKDriverName</b>      | Driver Name                                |





