---
title: SecureBootUEFIOverPXE
Description: SecureBootUEFIOverPXE
ms.assetid: f894d6d6-452e-46ac-bcfc-80a02adecc8e
author: sapaetsc-msft
ms.author: sapaetsc
ms.date: 08/28/17
ms.topic: article
ms.prod: windows-hardware
ms.technology: windows-oem
---

# SecureBootUEFIOverPXE

<conditional_block> <conditions> <docset value="standalone"></docset> </conditions>

>[!NOTE]
You can find the latest version of this test documentation on MSDN at the following link:

-   <xref hlink="http://msdn.microsoft.com/en-us/library/windows/hardware/f894d6d6-452e-46ac-bcfc-80a02adecc8e">http://msdn.microsoft.com/en-us/library/windows/hardware/f894d6d6-452e-46ac-bcfc-80a02adecc8e</b>


</conditional_block>

This manual test validates whether a test computer is capable of booting from the network in Secure Boot mode.

## Test details

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><mark type="bullet_intro">Specifications</b></td>
<td><ul>
<li>System.Server.AzureStack.Security.SecureBootUEFIOverPXE</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Platforms</b></td>
<td><ul>
<li><tla rid="win_threshold_server"></tla> x64</li>
</ul></td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Supported Releases</b></td>
<td><ul>
<li><tla rid="win_10"></tla></li>
<li><tla rid="win_10_th2"></tla></li>
<li><tla rid="win_10_rs1"></tla></li>
<li>Windows 10, version 1703</li>
<li>Windows 10, version 1709</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Expected run time (in minutes)</b></td>
<td>60</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Category</b></td>
<td>Scenario</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Timeout (in minutes)</b></td>
<td>60</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Requires reboot</b></td>
<td>false</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Requires special configuration</b></td>
<td>false</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Type</b></td>
<td>automatic</td>
</tr>
</tbody>
</table>

## Additional documentation

Tests in this feature area might have additional documentation, including prerequisites, setup, and troubleshooting information, that can be found in the following topic(s):

-   <xref rid="p_hlk_test.system_server_additional_documentation">System.Server additional documentation</b>

## Running the test

## **Hardware requirements**

The following hardware is required for testing Secure Boot over PXE:

-   A server that is running HLK controller and a test computer to act as the HLK proxy. Refer to Windows HLK prerequisites for more details.
-   A System under Test (SUT) server that meets the following requirements.

    -   You must configure the server according to the SecureBootUEFI test, and the server must pass the test.
    -   The server must have a network adapter installed that is capable of PXE boot.
    -   You must configure the serverâ€™s BIOS settings to allow boot from the network using the network adapter.

-   One or two servers on the network to run DHCP and Windows Deployment Services (WDS).
-   You must connect all computers to the same physical network.

The following diagram shows how to configure your hardware for Secure Boot over PXE testing.

![hardware configuration for secure boot over pxe](../images/secure_boot_over_pxe_1.png)

## **Software requirements**

The following software is required for testing Secure Boot over PXE.

-   The latest version of Windows HLK.
-   Windows Server 2016 installation media or ISO file.

## **Test execution**

1.  Ensure that DHCP server is running on the DHCP-WDS server (or a separate DHCP server) and has an active DHCP scope for the network with available IP addresses.
2.  Ensure that Windows Deployment Services (WDS) is installed on the DHCP-WDS server (or a separate WDS server).
3.  On the WDS server, do the following:

    1.  Open the Windows Deployment Services console. Expand **Servers &gt; Server Name**. Right-click **Boot Images**, and then click **Add Boot Image**.
    2.  In the **Add Image Wizard**, browse to the location of the Windows Server installation media in <placeholder>X</placeholder>:\\sources\\boot.wim, where <placeholder>X</placeholder> is the drive letter of the DVD or mounted ISO image. Accept all default values.
    3.  Right-click the WDS server, and then click **Properties**.
    4.  On the **PXE Response** tab, click **Respond to all client computers (known and unknown)**.
    5.  On the **Boot** tab, click **Always continue PXE boot** under both **Known clients** and **Unknown clients**.
    6.  On the **DHCP** tab, if the DHCP server is installed on the same computer, select both check boxes.

4.  Restart the System under Test (SUT) computer and force it to boot from PXE. Typically, you can press **F12** during the POST stage of server boot. However, this may differ depending on the hardware manufacturer.
5.  Monitor the progress on the client computer. A successful boot should display a **Windows Setup** screen with a **Windows Deployment Services** message.

    ![windows setup screen showing a windows deployment services message, indicating a successful boot](../images/secure_boot_over_pxe_2.png)

6.  Press **Shift+F10** to display the command prompt, and then type the following command:

    `reg query HKLM\System\CurrentControlSet\Control\SecureBoot\State`

    The registry value **UEFISecureBootEnabled** will be displayed. The expected value data is **0x1**.

7.  When you get the positive test results, you can run the HLK test against the HLK proxy (HLK client) test computer. You will be prompted to manually confirm that the test completed successfully.

## More information

## Parameters

| Parameter name                            | Parameter description                       |
|-------------------------------------------|---------------------------------------------|
| <mark type="bullet_intro">HasVerified</b> | Enter YES if you have verified the scenario |

## Troubleshooting

For generic troubleshooting of HLK test failures, see <xref rid="p_hlk.troubleshooting_windows_hlk_test_failures">Troubleshooting Windows HLK Test Failures</b>.



