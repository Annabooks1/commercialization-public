---
title: NDISTest 6.5 - LWF Logo test
Description: NDISTest 6.5 - LWF Logo test
ms.assetid: 0250f279-dbf9-4628-aaf2-51ee2a821f18
author: sapaetsc-msft
ms.author: sapaetsc
ms.date: 08/28/17
ms.topic: article
ms.prod: windows-hardware
ms.technology: windows-oem
---

# NDISTest 6.5 - LWF Logo test

<conditional_block> <conditions> <docset value="standalone"></docset> </conditions>

>[!NOTE]
You can find the latest version of this test documentation on MSDN at the following link:

-   <xref hlink="http://msdn.microsoft.com/en-us/library/windows/hardware/0250f279-dbf9-4628-aaf2-51ee2a821f18">http://msdn.microsoft.com/en-us/library/windows/hardware/0250f279-dbf9-4628-aaf2-51ee2a821f18</b>


</conditional_block>

This automated test targets LWF by validating that the all the requirements specified for the light weight filter driver are satisfied, and that they comply with NDIS specification on MSDN.

The test installs two of the NDISTest virtual miniports - “NDISTest 6.30 - CL - Default w/TCPIP”, which would be used as the test and support adapters for running the LWF logo test. These virtual miniports are uninstalled in the cleanup phase of the test.

Windows 8 has a requirement that all NDIS LWF drivers are NDIS 6.30. This is validated by ConfigCheck test, which will fail the filter logo test if the Filter driver is not NDIS 6.30.

ConfigCheck test also validates that the Filter driver selected as the target, is actually bound to the test adapter, and an error is thrown if the filter is not bound to the test adapter.

It is also validated that the filter driver is able to process packets that are larger than miniport's MTU size.

This also runs a filter stress test which is designed to stress the datapath and PnP paths of NDIS filter drivers.  The test will limit the test virtual miniport's receive descriptors such that a significant number of receive indications will happen with the receive resources flag.  This test performs the following actions in a multi-threaded way:

-   Stress traffic from the support miniport directed to the test miniport

-   Stress traffic from the test miniport directed to the support miniport

-   Stop/start the test miniport (which triggers a pause and subsequent restart operations)

-   Test adapter indicating media disconnected/connected

-   Test adapter resetting

Finally, basic send and receive connectivity will be tested between the test/support adapters.

## Test details

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><mark type="bullet_intro">Specifications</b></td>
<td><ul>
<li>Filter.Driver.Network.LWF.Base</li>
<li>Filter.Driver.Network.LWF.MTUSize</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Platforms</b></td>
<td><ul>
</ul></td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Expected run time (in minutes)</b></td>
<td>2</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Category</b></td>
<td>Development</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Timeout (in minutes)</b></td>
<td>2</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Requires reboot</b></td>
<td>false</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Requires special configuration</b></td>
<td>false</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Type</b></td>
<td>automatic</td>
</tr>
</tbody>
</table>

## Additional documentation

Tests in this feature area might have additional documentation, including prerequisites, setup, and troubleshooting information, that can be found in the following topic(s):

-   <xref rid="p_hlk_test.filter_driver_additional_documentation">Filter.Driver additional documentation</b>

## Running the test

Before you run the test, you need to manually install your filter driver on the test machine.

Follow these steps to run the test:

1.  Configure the HLK Server and HLK Client machines. Filter Logo tests need just the one client machine.

2.  Install the Light Weight Filter driver on the Client machine.

3.  Restart the Client machine.

4.  From the HLK Server, add the client on which the LWF is installed to a new machine pool, and change the machine status to ‘Ready’.

5.  From HLK studio, create a new project under the **Project** tab in HLK Studio.

6.  In the **Selection** tab of the HLK studio, select the machine pool that was created in the previous steps from the dropdown.

7.  Select **software device**, and select the LightWeightFilter driver that was installed and needs to be tested (see the following figure).

    ![Select Filter Driver](../images/NDISTest65_LWF_Logo_Test.png)

8.  Run all of the tests listed in the **Tests** tab against the filter driver.

## Troubleshooting

For generic troubleshooting of HLK test failures, see <xref rid="p_hlk.troubleshooting_windows_hlk_test_failures">Troubleshooting Windows HLK Test Failures</b>.

For troubleshooting information, see <xref rid="p_hlk.troubleshooting_the_windows_hlk_environment">Troubleshooting the Windows HLK Environment</b>.

## More information

## Parameters

| Parameter name                                   | Parameter description                        |
|--------------------------------------------------|----------------------------------------------|
| <mark type="bullet_intro">TestAdapter</b>        |                                              |
| <mark type="bullet_intro">SupportAdapter</b>     |                                              |
| <mark type="bullet_intro">TestScript</b>         |                                              |
| <mark type="bullet_intro">queryFilterService</b> | ServiceName of the filter selected as target |





