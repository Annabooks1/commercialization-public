---
title: Connected Standby IO Stress
Description: Connected Standby IO Stress
ms.assetid: 057a28ba-474c-4f32-80b3-95f76d3573ae
author: sapaetsc-msft
ms.author: sapaetsc
ms.date: 08/28/17
ms.topic: article
ms.prod: windows-hardware
ms.technology: windows-oem
---

# Connected Standby IO Stress

<conditional_block> <conditions> <docset value="standalone"></docset> </conditions>

>[!NOTE]
You can find the latest version of this test documentation on MSDN at the following link:

-   <xref hlink="http://msdn.microsoft.com/en-us/library/windows/hardware/057a28ba-474c-4f32-80b3-95f76d3573ae">http://msdn.microsoft.com/en-us/library/windows/hardware/057a28ba-474c-4f32-80b3-95f76d3573ae</b>


</conditional_block>

This test verifies that Connected Standby is functioning in the presence of IO events and that data corruptions do not occur across Connected Standby transitions.

## Test details

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><mark type="bullet_intro">Specifications</b></td>
<td><ul>
<li>System.Fundamentals.StorageAndBoot.BootPerformance</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Platforms</b></td>
<td><ul>
<li><tla rid="win_threshold_desktop"></tla> x86</li>
<li><tla rid="win_threshold_desktop"></tla> x64</li>
<li><tla rid="win_threshold_desktop"></tla> ARM64</li>
</ul></td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Supported Releases</b></td>
<td><ul>
<li><tla rid="win_10"></tla></li>
<li><tla rid="win_10_th2"></tla></li>
<li><tla rid="win_10_rs1"></tla></li>
<li>Windows 10, version 1703</li>
<li>Windows 10, version 1709</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Expected run time (in minutes)</b></td>
<td>480</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Category</b></td>
<td>Scenario</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Timeout (in minutes)</b></td>
<td>480</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Requires reboot</b></td>
<td>false</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Requires special configuration</b></td>
<td>false</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Type</b></td>
<td>automatic</td>
</tr>
</tbody>
</table>

## Additional documentation

Tests in this feature area might have additional documentation, including prerequisites, setup, and troubleshooting information, that can be found in the following topic(s):

-   <xref rid="p_hlk_test.system_fundamentals_additional_documentation">System.Fundamentals additional documentation</b>

## Running the test

Before you run the test, complete the test setup as described in the test requirements: <xref rid="p_hlk_test.wdtf_system_fundamentals_testing_prerequisites">WDTF System Fundamentals Testing Prerequisites</b>.

Before running the test, ensure that the system is able to enter and exit Connected Standby reliably. The test will stress its Connected Standby support. Also, ensure that there is greater than 2GB of free space on the boot volume to ensure that RapidFile is able to write to the disk.

## Troubleshooting

For generic troubleshooting of HLK test failures, see <xref rid="p_hlk.troubleshooting_windows_hlk_test_failures">Troubleshooting Windows HLK Test Failures</b>.

For troubleshooting information, see <xref rid="p_hlk.troubleshooting_the_windows_hlk_environment">Troubleshooting the Windows HLK Environment</b>.

If the Check Configuration section fails, look at the log from the “Run ParseTrace.exe” task to determine why it failed. It may be caused by the system not entering in Connected Standby in response to the test issuing that command.

If the test fails on the Long Haul section then you can look into the last wtl logs generated by SCSI Compliance, RapidFile, and the Connected Standby script to determine what the cause of the error was.

## More information

The test consists of three parts: setup, check configuration, and long haul.

The setup part copies the files to the system, exempts processes from the DAM, and enables test signing. Failures in this section are straightforward and the cause can be determined by viewing the error codes returned from the task.

The check configuration part runs Connected Standby, RapidFile, and SCSI Compliance tests in parallel for a few minutes while tracing the disk activity and the power states of the devices. This is to ensure that the devices are entering the proper power states in response to the test. Most commonly, a failure will be seen in the “Run ParseTrace.exe” task which evaluates the results from the ETW traces and determines if the devices entered the proper states. Viewing the task log for this task should reveal the cause of failure.

If the first two parts passed, the test enters into the long haul part where the same three files are run in parallel as in the check configuration part, but this time without the ETW tracing. The tasks run for 8 hours and passes as long as the system is able to continue running for that time and data integrity is maintained.

## Command syntax

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Command option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>/Process</p></td>
<td><p>Process to run: ConnectedStandby, RapidFile, RapidFileVerify, or SCSICompliance.</p></td>
</tr>
<tr class="even">
<td><p>/Duration</p></td>
<td><p>Duration to run the test (seconds).</p></td>
</tr>
<tr class="odd">
<td><p>/Device</p></td>
<td><p>Drive letter or physical drive number of device to test.</p></td>
</tr>
<tr class="even">
<td><p>/Scenario</p></td>
<td><p>Scenario type to test: CheckConfiguration, Stress, LongHaul, or SelectiveSuspend.</p>
<p>Default value: LongHaul</p></td>
</tr>
</tbody>
</table>

>[!NOTE]
For command line help for this test binary, type **/h**.


## Command usage

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>cscript.exe ConnectedStandbyIOStress.wsf /Process:ConnectedStandby /Duration:[RunDurationSeconds] /Scenario:[Scenario]</strong></p></td>
<td><p>Runs the Connected Standby test.</p></td>
</tr>
<tr class="even">
<td><p><strong>cscript.exe ConnectedStandbyIOStress.wsf /Process:RapidFile /Duration:[RunDurationSeconds] /Device:[StorageDriveLetter] /Scenario:[Scenario]</strong></p></td>
<td><p>Runs the RapidFile test.</p></td>
</tr>
<tr class="odd">
<td><p><strong>cscript.exe ConnectedStandbyIOStress.wsf /Process:SCSICompliance /Duration:[RunDurationSeconds] /Device:[StorageDriveNumber] /Scenario:[Scenario]</strong></p></td>
<td><p>Runs the SCSI Compliance test.</p></td>
</tr>
</tbody>
</table>

>[!NOTE]
For command line help for this test binary, type **/h.**


## File list

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>File</th>
<th>Location</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>ntlog.dll</p></td>
<td><p><placeholder>&lt;osbinroot&gt;</placeholder>\nttest\commontest\ntlog\</p></td>
</tr>
<tr class="even">
<td><p>ntlogger.ini</p></td>
<td><p><placeholder>&lt;osbinroot&gt;</placeholder>\nttest\commontest\ntlog\</p></td>
</tr>
<tr class="odd">
<td><p>Damx.exe</p></td>
<td><p><placeholder>&lt;testbinroot&gt;</placeholder>\cstools\dam\</p></td>
</tr>
<tr class="even">
<td><p>Stresslog.dll</p></td>
<td><p><placeholder>&lt;testbinroot&gt;</placeholder>\nttest\basetest\core_file_services\shared_libs\</p></td>
</tr>
<tr class="odd">
<td><p>Fbslog.dll</p></td>
<td><p><placeholder>&lt;testbinroot&gt;</placeholder>\nttest\basetest\core_file_services\shared_libs\fbslog\</p></td>
</tr>
<tr class="even">
<td><p>Rapidfile.exe</p></td>
<td><p><placeholder>&lt;testbinroot&gt;</placeholder>\nttest\basetest\core_file_services\shared_tests\wdk</p></td>
</tr>
<tr class="odd">
<td><p>ParseTrace.exe</p></td>
<td><p><placeholder>&lt;testbinroot&gt;</placeholder>\nttest\driverstest\storage\sd\lowpower\</p></td>
</tr>
<tr class="even">
<td><p>ConnectedStandbyIOStress.wsf</p></td>
<td><p><placeholder>&lt;testbinroot&gt;</placeholder>\nttest\driverstest\storage\wdk\connectedstandy\</p></td>
</tr>
<tr class="odd">
<td><p>Wttlog_obj.js</p></td>
<td><p><placeholder>&lt;testbinroot&gt;</placeholder>\nttest\driverstest\storage\wdk\</p></td>
</tr>
<tr class="even">
<td><p>Scsicompliance.exe</p></td>
<td><p><placeholder>&lt;testbinroot&gt;</placeholder>\nttest\driverstest\storage\wdk\</p></td>
</tr>
</tbody>
</table>

## Parameters

| Parameter name                                   | Parameter description                      |
|--------------------------------------------------|--------------------------------------------|
| <mark type="bullet_intro">LLU\_NetAccessOnly</b> | User account for accessing test fileshare. |
| <mark type="bullet_intro">LLU\_LclAdminUsr</b>   | User account for running the test.         |
| <mark type="bullet_intro">DiskDeviceObjLink</b>  | Assigned by Create Storage Parameters.     |
| <mark type="bullet_intro">StorageDriveLetter</b> | Assigned by Create Storage Parameters.     |
| <mark type="bullet_intro">StorageDriveNumber</b> | Assigned by Create Storage Parameters.     |
| <mark type="bullet_intro">Destructive</b>        | (0,1) 0=Passive, 1=Destructive             |





