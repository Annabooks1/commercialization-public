---
title: SD-Ioctl Test
Description: SD-Ioctl Test
ms.assetid: 3ec09897-5db9-4481-ba38-5f5e22ca9cad
author: sapaetsc-msft
ms.author: sapaetsc
ms.date: 08/28/17
ms.topic: article
ms.prod: windows-hardware
ms.technology: windows-oem
---

# SD-Ioctl Test

<conditional_block> <conditions> <docset value="standalone"></docset> </conditions>

>[!NOTE]
You can find the latest version of this test documentation on MSDN at the following link:

-   <xref hlink="http://msdn.microsoft.com/en-us/library/windows/hardware/3ec09897-5db9-4481-ba38-5f5e22ca9cad">http://msdn.microsoft.com/en-us/library/windows/hardware/3ec09897-5db9-4481-ba38-5f5e22ca9cad</b>


</conditional_block>

This test verifies that SD-specific IOCTL calls work from any user mode process as expected.

## Test details

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><mark type="bullet_intro">Specifications</b></td>
<td><ul>
<li>Device.Storage.Controller.SD.BasicFunction</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Platforms</b></td>
<td><ul>
<li><tla rid="win_threshold_desktop"></tla> x86</li>
<li><tla rid="win_threshold_desktop"></tla> x64</li>
<li><tla rid="win_threshold_server"></tla> x64</li>
</ul></td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Supported Releases</b></td>
<td><ul>
<li><tla rid="win_10"></tla></li>
<li><tla rid="win_10_th2"></tla></li>
<li><tla rid="win_10_rs1"></tla></li>
<li>Windows 10, version 1703</li>
<li>Windows 10, version 1709</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Expected run time (in minutes)</b></td>
<td>5</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Category</b></td>
<td>Development</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Timeout (in minutes)</b></td>
<td>5</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Requires reboot</b></td>
<td>false</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Requires special configuration</b></td>
<td>false</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Type</b></td>
<td>automatic</td>
</tr>
</tbody>
</table>

## Additional documentation

Tests in this feature area might have additional documentation, including prerequisites, setup, and troubleshooting information, that can be found in the following topic(s):

-   <xref rid="p_hlk_test.device_storage_additional_documentation">Device.Storage additional documentation</b>

## Running the test

Before you run the test, complete the test setup as described in the test requirements: <xref rid="p_hlk_test.wdtf_system_fundamentals_testing_prerequisites">WDTF System Fundamentals Testing Prerequisites</b>.

The test expects that an SD card is inserted into the host controller and working before the test begins.

## Troubleshooting

For generic troubleshooting of HLK test failures, see <xref rid="p_hlk.troubleshooting_windows_hlk_test_failures">Troubleshooting Windows HLK Test Failures</b>.

The test sends several variations of IOCTLs to the disk and validates the response. In the case of an error sending the IOCTL or validating the response, the logs contain information about the errors. To check the WTT trace, perform the following steps:

-   View Task Log of Run SDIOCTL Test.

-   Open the log file sdioctltst.wtl.

-   Check for messages that may solve the issue.

For additional troubleshooting information, see <xref rid="p_hlk_test.troubleshooting_system_fundamentals_testing">Troubleshooting System Fundamentals Testing</b>.

## More information

The test will go through a series of IOCTLs and various parameters surrounding those IOCTLs. It will send them to the underlying disk and validate the response conforms to the requirements. Log information about which IOCTLs and the results are printed as tests cases in the log.

The following is a list of the IOCTLs that are covered in this file:

1.  IOCTL\_DISK\_MEDIA\_REMOVAL

2.  IOCTL\_DISK\_GET\_LENGTH\_INFO

3.  IOCTL\_DISK\_IS\_WRITABLE

4.  IOCTL\_DISK\_VERIFY

5.  IOCTL\_STORAGE\_CHECK\_VERIFY

6.  IOCTL\_STORAGE\_CHECK\_VERIFY2

7.  IOCTL\_DISK\_CHECK\_VERIFY

8.  IOCTL\_DISK\_GET\_CACHE\_INFORMATION

9.  IOCTL\_STORAGE\_GET\_HOTPLUG\_INFO

10. IOCTL\_STORAGE\_SET\_HOTPLUG\_INFO

11. IOCTL\_STORAGE\_GET\_DEVICE\_NUMBER

12. IOCTL\_DISK\_GET\_DRIVE\_GEOMETRY

13. IOCTL\_DISK\_GET\_DRIVE\_GEOMETRY\_EX

14. IOCTL\_STORAGE\_GET\_MEDIA\_TYPES\_EX

15. IOCTL\_STORAGE\_QUERY\_PROPERTY

16. IOCTL\_SCSI\_GET\_ADDRESS

17. IOCTL\_STORAGE\_GET\_MEDIA\_SERIAL\_NUMBER

18. IOCTL\_SFFDISK\_QUERY\_DEVICE\_PROTOCOL

19. IOCTL\_SFFDISK\_DEVICE\_COMMAND

20. IOCTL\_SFFDISK\_DEVICE\_PASSWORD

## Parameters

| Parameter name                                   | Parameter description            |
|--------------------------------------------------|----------------------------------|
| <mark type="bullet_intro">LLU\_NetAccessOnly</b> |                                  |
| <mark type="bullet_intro">WDKDeviceID</b>        | Instance path of device to test. |





