---
title: SD-Ioctl Test
description: SD-Ioctl Test
MSHAttr:
- 'PreferredSiteName:MSDN'
- 'PreferredLib:/library/windows/hardware'
ms.assetid: 3ec09897-5db9-4481-ba38-5f5e22ca9cad
---

# <span id="p_hlk_test.0b339365-bf86-4fc3-80f2-12b0a0283b3a"></span>SD-Ioctl Test


This test verifies that SD-specific IOCTL calls work from any user mode process as expected.

## <span id="Test_details"></span><span id="test_details"></span><span id="TEST_DETAILS"></span>Test details


<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Specifications</strong></td>
<td><ul>
<li>Device.Storage.Controller.SD.BasicFunction</li>
</ul></td>
</tr>
<tr class="even">
<td><strong>Platforms</strong></td>
<td><ul>
<li>Windows 10 for desktop editions (Home, Pro, Enterprise, and Education) x86</li>
<li>Windows 10 for desktop editions x64</li>
<li>Windows Server 2016 x64</li>
</ul></td>
</tr>
<tr class="odd">
<td><strong>Supported Releases</strong></td>
<td><ul>
<li>Windows 10</li>
<li>Windows 10, version 1511</li>
<li>Windows 10, version 1607</li>
<li>Windows 10, version 1703</li>
</ul></td>
</tr>
<tr class="even">
<td><strong>Expected run time (in minutes)</strong></td>
<td>5</td>
</tr>
<tr class="odd">
<td><strong>Category</strong></td>
<td>Development</td>
</tr>
<tr class="even">
<td><strong>Timeout (in minutes)</strong></td>
<td>300</td>
</tr>
<tr class="odd">
<td><strong>Requires reboot</strong></td>
<td>false</td>
</tr>
<tr class="even">
<td><strong>Requires special configuration</strong></td>
<td>false</td>
</tr>
<tr class="odd">
<td><strong>Type</strong></td>
<td>automatic</td>
</tr>
</tbody>
</table>

 

## <span id="Additional_documentation"></span><span id="additional_documentation"></span><span id="ADDITIONAL_DOCUMENTATION"></span>Additional documentation


Tests in this feature area might have additional documentation, including prerequisites, setup, and troubleshooting information, that can be found in the following topic(s):

-   [Device.Storage additional documentation](device-storage-additional-documentation.md)

## <span id="Running_the_test"></span><span id="running_the_test"></span><span id="RUNNING_THE_TEST"></span>Running the test


Before you run the test, complete the test setup as described in the test requirements: [WDTF System Fundamentals Testing Prerequisites](wdtf-system-fundamentals-testing-prerequisites.md).

The test expects that an SD card is inserted into the host controller and working before the test begins.

## <span id="Troubleshooting"></span><span id="troubleshooting"></span><span id="TROUBLESHOOTING"></span>Troubleshooting


For generic troubleshooting of HLK test failures, see [Troubleshooting Windows HLK Test Failures](p_hlk.troubleshooting_windows_hlk_test_failures).

The test sends several variations of IOCTLs to the disk and validates the response. In the case of an error sending the IOCTL or validating the response, the logs contain information about the errors. To check the WTT trace, perform the following steps:

-   View Task Log of Run SDIOCTL Test.

-   Open the log file sdioctltst.wtl.

-   Check for messages that may solve the issue.

For additional troubleshooting information, see [Troubleshooting System Fundamentals Testing](troubleshooting-system-fundamentals-testing.md).

## <span id="More_information"></span><span id="more_information"></span><span id="MORE_INFORMATION"></span>More information


The test will go through a series of IOCTLs and various parameters surrounding those IOCTLs. It will send them to the underlying disk and validate the response conforms to the requirements. Log information about which IOCTLs and the results are printed as tests cases in the log.

The following is a list of the IOCTLs that are covered in this file:

1.  IOCTL\_DISK\_MEDIA\_REMOVAL

2.  IOCTL\_DISK\_GET\_LENGTH\_INFO

3.  IOCTL\_DISK\_IS\_WRITABLE

4.  IOCTL\_DISK\_VERIFY

5.  IOCTL\_STORAGE\_CHECK\_VERIFY

6.  IOCTL\_STORAGE\_CHECK\_VERIFY2

7.  IOCTL\_DISK\_CHECK\_VERIFY

8.  IOCTL\_DISK\_GET\_CACHE\_INFORMATION

9.  IOCTL\_STORAGE\_GET\_HOTPLUG\_INFO

10. IOCTL\_STORAGE\_SET\_HOTPLUG\_INFO

11. IOCTL\_STORAGE\_GET\_DEVICE\_NUMBER

12. IOCTL\_DISK\_GET\_DRIVE\_GEOMETRY

13. IOCTL\_DISK\_GET\_DRIVE\_GEOMETRY\_EX

14. IOCTL\_STORAGE\_GET\_MEDIA\_TYPES\_EX

15. IOCTL\_STORAGE\_QUERY\_PROPERTY

16. IOCTL\_SCSI\_GET\_ADDRESS

17. IOCTL\_STORAGE\_GET\_MEDIA\_SERIAL\_NUMBER

18. IOCTL\_SFFDISK\_QUERY\_DEVICE\_PROTOCOL

19. IOCTL\_SFFDISK\_DEVICE\_COMMAND

20. IOCTL\_SFFDISK\_DEVICE\_PASSWORD

### <span id="Parameters"></span><span id="parameters"></span><span id="PARAMETERS"></span>Parameters

| Parameter name         | Parameter description            |
|------------------------|----------------------------------|
| **LLU\_NetAccessOnly** |                                  |
| **WDKDeviceID**        | Instance path of device to test. |

 

 

 

[Send comments about this topic to Microsoft](mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback%20%5Bp_hlk_test\p_hlk_test%5D:%20SD-Ioctl%20Test%20%20RELEASE:%20%288/29/2017%29&body=%0A%0APRIVACY%20STATEMENT%0A%0AWe%20use%20your%20feedback%20to%20improve%20the%20documentation.%20We%20don't%20use%20your%20email%20address%20for%20any%20other%20purpose,%20and%20we'll%20remove%20your%20email%20address%20from%20our%20system%20after%20the%20issue%20that%20you're%20reporting%20is%20fixed.%20While%20we're%20working%20to%20fix%20this%20issue,%20we%20might%20send%20you%20an%20email%20message%20to%20ask%20for%20more%20info.%20Later,%20we%20might%20also%20send%20you%20an%20email%20message%20to%20let%20you%20know%20that%20we've%20addressed%20your%20feedback.%0A%0AFor%20more%20info%20about%20Microsoft's%20privacy%20policy,%20see%20http://privacy.microsoft.com/en-us/default.aspx. "Send comments about this topic to Microsoft")




