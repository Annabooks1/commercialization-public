---
title: WGF11 Streamout (WoW64) 
Description: WGF11 Streamout (WoW64) 
ms.assetid: 4418d8cd-ad87-4a94-b286-026024ee17ea
author: sapaetsc-msft
ms.author: sapaetsc
ms.date: 08/28/17
ms.topic: article
ms.prod: windows-hardware
ms.technology: windows-oem
---

# WGF11 Streamout (WoW64) 

<conditional_block> <conditions> <docset value="standalone"></docset> </conditions>

>[!NOTE]
You can find the latest version of this test documentation on MSDN at the following link:

-   <xref hlink="http://msdn.microsoft.com/en-us/library/windows/hardware/4418d8cd-ad87-4a94-b286-026024ee17ea">http://msdn.microsoft.com/en-us/library/windows/hardware/4418d8cd-ad87-4a94-b286-026024ee17ea</b>


</conditional_block>

This automated test verifies that graphics drivers/hardware D3D stream-out behavior meets Microsoft Direct3D specifications.

This topic applies to the following test jobs:

-   WGF11 Streamout

-   WGF11 Streamout (WoW64)

## Test details

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><mark type="bullet_intro">Specifications</b></td>
<td><ul>
<li>Device.Graphics.AdapterRender.D3D111Core.D3D111CorePrimary</li>
<li>Device.Graphics.AdapterRender.D3D11Core.D3D11CorePrimary</li>
<li>Device.Graphics.AdapterRender.D3D101Core.D3D101CorePrimary</li>
<li>Device.Graphics.AdapterRender.D3D10Core.D3D10CorePrimary</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Platforms</b></td>
<td><ul>
<li><tla rid="win_threshold_desktop"></tla> x64</li>
<li><tla rid="win_threshold_server"></tla> x64</li>
<li><tla rid="win_threshold_desktop"></tla> ARM64</li>
</ul></td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Supported Releases</b></td>
<td><ul>
<li><tla rid="win_10"></tla></li>
<li><tla rid="win_10_th2"></tla></li>
<li><tla rid="win_10_rs1"></tla></li>
<li>Windows 10, version 1703</li>
<li>Windows 10, version 1709</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Expected run time (in minutes)</b></td>
<td>2</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Category</b></td>
<td>Compatibility</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Timeout (in minutes)</b></td>
<td>2</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Requires reboot</b></td>
<td>false</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Requires special configuration</b></td>
<td>false</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Type</b></td>
<td>automatic</td>
</tr>
</tbody>
</table>

## Additional documentation

Tests in this feature area might have additional documentation, including prerequisites, setup, and troubleshooting information, that can be found in the following topic(s):

-   <xref rid="p_hlk_test.device_graphics_additional_documentation">Device.Graphics additional documentation</b>

## Running the test

Before you run the test, complete the test setup as described in the test requirements: <xref rid="p_hlk_test.graphic_adapter_or_chipset_testing_prerequisites">Graphic Adapter or Chipset Testing Prerequisites</b>.

## Troubleshooting

For generic troubleshooting of HLK test failures, see <xref rid="p_hlk.troubleshooting_windows_hlk_test_failures">Troubleshooting Windows HLK Test Failures</b>.

For troubleshooting information, see <xref rid="p_hlk_test.troubleshooting_devicegraphics_testing">Troubleshooting Device.Graphics Testing</b>.

All test cases return PASS or FAIL. Review the test results in the log file for specific details about failures. The test might return SKIP if it is run with a feature level that doesn't support the feature being tested. The test might return BLOCKED if there is an uncaught exception (framework catches it at the end and logs it). To review test details, review the test log from the Windows HLK Manager.

## More information

The following outlines the StreamOut Conformance Test Plan:

-   **General Stream Out Test Cases**

    -   Pass input data into the pipeline by using VB and stream out transformed data from VS or GS.

        >[!NOTE]
        In the GS case, consider amplification issues by emitting more than one output primitive per input primitive.

        
    -   Cycle on different primitive types, buffer sizes, emit counts, vand buffer offsets.

    -   Test appending SO data by making multiple Draw() calls.

    -   For GS, cycle on shaders with different "maxvertexcount" properties.

        Occasionally overflow this value, making sure that only complete primitives are kept.

    -   Possibly cycle on different input primitive types and output topologies.

    -   Verify expected query results

        -   STREAMOUTPUTSTATS

        -   STREAMOVERFLOWPREDICATE

    -   Test incomplete primitive writes.

    -   Test winding order and leading-vertex handling.

    -   Up to 227 SO vertices per SO buffer are allowed.

        >[!NOTE]
        Because this is such a large resource, this works for probably one or two test cases.

        

-   **Simple Single-Buffer Tests**

    -   Cycle on several declaration scenarios:

        -   Simple.

        -   Leave gaps.

        -   Split output registers across multiple SO elements.

        -   Merge output register into a single SO element.

    -   Cycle on different SO vertex sizes.

        Verify limit of 64-component SO vertices.

-   **Simple Multi-Buffer Tests**

    -   Mix up buffer sizes/offsets so that buffers overflow at different times.

    -   Cycle on several declaration scenarios:

        -   Simple.

        -   Skip output slot.

        -   Split output registers across multiple SO elements.

        -   Stream out partial register components.

        -   Stream out to single buffer in non-zero slot.

-   **Ping Ponging of Stream Output Buffers**

    -   Similar to simple single-buffer and simple multi-buffer tests with a twist:

        -   Initially bind buffers A and B with a positive offset.

        -   Bind buffer A using -1 offset value.

        -   Draw()

        -   Bind buffer B using -1 offset value.

        -   Draw()

        -   Repeat as needed.

    -   In multiple buffer scenarios, consider optionally ping-ponging only some of the SO buffers between Draw() calls.

-   **Changing SO Vertex Size Using Same Target Buffer**

    -   Custom test case that focuses on setting "fat" vertex strides to a single buffer, then Draw(), then sets "skinny" SO vertex stride, then Draw() again.

    -   Examine STREAMOUTPUTSTATS.

    -   Watch for overflow during "fat" vertex streaming and make sure that skinny vertices cannot be appended to target.

        >[!NOTE]
        Consider ping-ponging during this step to make sure that the overflowed state is "sticky" on the buffer.

        

-   **Addressable Stream Output (D3D11)**

    **Test RasterizedStream and multiple vectors of data:**

    -   When sending a stream to the rasterizer, make sure that the final result uses the vertex data from that stream.

    -   Make sure that more than one vector of data can be output from a stream under feature level 11, even when using a gs\_4\_x shader.

    -   Test strides that aren't tightly aligned to the size of an element in a stream output buffer.

    -   Verify that stream output works when the runtime determines strides based on the size calculated using the stream output declaration. The runtime does this when the stride parameters in the create call are both NULL.

-   **Test feature level and query behavior:**

    -   When using feature levels 10 and 10.1, make sure only stream 0 can be used for stream output.

    -   When using feature levels 10 and 10.1, make sure that only gs\_4\_x shaders can be used. If multiple buffers are used, make sure that only one vector of data can be output from stream 0 i.

    -   D3D11\_QUERY\_SO\_STATISTICS and D3D11\_QUERY\_SO\_OVERFLOW\_PREDICATE queries should return the correct data for the sum of all streams. D3D11\_QUERY\_SO\_STATISTICS\_STREAMn and D3D11\_QUERY\_SO\_OVERFLOW\_PREDICATE\_STREAMn queries return the correct data for each stream. There are currently test cases for the single stream case. The following will be verified:

        -   Expected number of primitives written to stream output buffers.

        -   Expected size of the primitives (if they are all to be output to buffers).

        -   Overflow predicate is triggered when one buffer overflows when writing to it.

        -   If one buffer in a stream is filled, writes to all buffers in that stream are prevented.

        -   Results of queries for undefined streams should not be affected.

## Command Syntax

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Command option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>Wgf11streamout</strong></p></td>
<td><p>Rusn the test. Without any options, the test enumerates devices.</p></td>
</tr>
<tr class="even">
<td><p><strong>-FeatureLevel:XX.X</strong></p></td>
<td><p>Sets the feature level tested where XX.X is the Feature Level the test will run at: 10.0, 10.1, or 11.0.</p></td>
</tr>
</tbody>
</table>

>[!NOTE]
For command line help for this test binary, type **/?**.


## File List

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>File</th>
<th>Location</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Configdisplay.exe</p></td>
<td><p><placeholder>&lt;[testbinroot]&gt;</placeholder>\nttest\windowstest\tools\</p></td>
</tr>
<tr class="even">
<td><p>D3d11_1sdklayers.dll</p></td>
<td><p><placeholder>&lt;[testbinroot]&gt;</placeholder>\nttest\windowstest\graphics\d3d\support\</p></td>
</tr>
<tr class="odd">
<td><p>D3d11ref.dll</p></td>
<td><p><placeholder>&lt;[testbinroot]&gt;</placeholder>\nttest\windowstest\graphics\d3d\support\</p></td>
</tr>
<tr class="even">
<td><p>D3d11sdklayers.dll</p></td>
<td><p><placeholder>&lt;[testbinroot]&gt;</placeholder>\nttest\windowstest\graphics\d3d\support\</p></td>
</tr>
<tr class="odd">
<td><p>D3dcompiler_test.dll</p></td>
<td><p><placeholder>&lt;[testbinroot]&gt;</placeholder>\nttest\windowstest\graphics\d3d\support</p></td>
</tr>
<tr class="even">
<td><p>D3dx10_test.dll</p></td>
<td><p><placeholder>&lt;[testbinroot]&gt;</placeholder>\nttest\windowstest\graphics\d3d\support\</p></td>
</tr>
<tr class="odd">
<td><p>d3dx11_test.dll</p></td>
<td><p><placeholder>&lt;[testbinroot]&gt;</placeholder>\nttest\windowstest\graphics\d3d\support\</p></td>
</tr>
<tr class="even">
<td><p>TDRWatch.exe</p></td>
<td><p><placeholder>&lt;[testbinroot]&gt;</placeholder>\nttest\windowstest\graphics\</p></td>
</tr>
<tr class="odd">
<td><p>Wgf11streamout.exe</p></td>
<td><p><placeholder>&lt;[testbinroot]&gt;</placeholder>\nttest\windowstest\graphics\d3d\conf</p></td>
</tr>
</tbody>
</table>

## Parameters

| Parameter name                                         | Parameter description                                 |
|--------------------------------------------------------|-------------------------------------------------------|
| <mark type="bullet_intro">MODIFIEDCMDLINE</b>          | Additional command line arguments for test executable |
| <mark type="bullet_intro">LLU\_NetAccessOnly</b>       | LLU Name of net user                                  |
| <mark type="bullet_intro">ConfigDisplayCommandLine</b> | Custom Command Line for ConfigDisplay. Default: logo  |
| <mark type="bullet_intro">TDRArgs</b>                  | /get or /set                                          |





