---
title: Rapidfile Test (SYSTEM)
Description: Rapidfile Test (SYSTEM)
ms.assetid: d826458a-251e-4558-834d-e3022eaab340
author: sapaetsc-msft
ms.author: sapaetsc
ms.date: 08/28/17
ms.topic: article
ms.prod: windows-hardware
ms.technology: windows-oem
---

# Rapidfile Test (SYSTEM)

<conditional_block> <conditions> <docset value="standalone"></docset> </conditions>

>[!NOTE]
You can find the latest version of this test documentation on MSDN at the following link:

-   <xref hlink="http://msdn.microsoft.com/en-us/library/windows/hardware/d826458a-251e-4558-834d-e3022eaab340">http://msdn.microsoft.com/en-us/library/windows/hardware/d826458a-251e-4558-834d-e3022eaab340</b>


</conditional_block>

This test runs through data integrity tests on the specified volume or file.

## Test details

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><mark type="bullet_intro">Specifications</b></td>
<td><ul>
<li>System.Fundamentals.StorageAndBoot.BootPerformance</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Platforms</b></td>
<td><ul>
<li><tla rid="win_threshold_desktop"></tla> x86</li>
<li><tla rid="win_threshold_desktop"></tla> x64</li>
<li><tla rid="win_threshold_desktop"></tla> ARM64</li>
</ul></td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Supported Releases</b></td>
<td><ul>
<li><tla rid="win_10"></tla></li>
<li><tla rid="win_10_th2"></tla></li>
<li><tla rid="win_10_rs1"></tla></li>
<li>Windows 10, version 1703</li>
<li>Windows 10, version 1709</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Expected run time (in minutes)</b></td>
<td>30</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Category</b></td>
<td>Scenario</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Timeout (in minutes)</b></td>
<td>30</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Requires reboot</b></td>
<td>false</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Requires special configuration</b></td>
<td>false</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Type</b></td>
<td>automatic</td>
</tr>
</tbody>
</table>

## Additional documentation

Tests in this feature area might have additional documentation, including prerequisites, setup, and troubleshooting information, that can be found in the following topic(s):

-   <xref rid="p_hlk_test.system_fundamentals_additional_documentation">System.Fundamentals additional documentation</b>

## Running the test

Before you run the test, complete the test setup as described in the test requirements: <xref rid="p_hlk_test.wdtf_system_fundamentals_testing_prerequisites">WDTF System Fundamentals Testing Prerequisites</b>.

The volume path must exist before running the test. If a file path is used, the test creates the file during write phase/step and expects the same file path during read/verify phase.

## Troubleshooting

For generic troubleshooting of HLK test failures, see <xref rid="p_hlk.troubleshooting_windows_hlk_test_failures">Troubleshooting Windows HLK Test Failures</b>.

For troubleshooting information, see <xref rid="p_hlk_test.troubleshooting_system_fundamentals_testing">Troubleshooting System Fundamentals Testing</b>.

This test returns Pass or Fail. To review test details, review the test log from Windows Hardware Lab Kit (Windows HLK) Studio.

## More information

This test accepts a lot of parameters related to the file system/IO behavior and a few of them are explained below:

<mark type="bullet_intro">I/O Operation</b>

1.  <mark type="bullet_intro">Write</b> This is the default operation performed on the device path provided in the command-line.

2.  <mark type="bullet_intro">Read/Verify</b> Performs read when /V option is specified in the command-line. After a given read IO finishes, test would compare the read data against the expected data (based off the device path given at the command-line) and inform the user if read data doesn’t match with the expected data (data corruption).

<mark type="bullet_intro">I/O Mode</b>

1.  <mark type="bullet_intro">Synchronous</b> When the /SYNC command-line option is specified, I/O requests done by the test on the given device path (file/volume) would be done synchronously. The test waits for the completion of an I/O before issuing another one. This is not the default option.

2.  <mark type="bullet_intro">Asynchronous</b> When the /SYNC command-line option is not specified, I/O requests are performed in an asynchronous manner where the test issues a set of I/O requests without waiting for their completion. Completion of the respective I/O requests are tracked separately. This is the default mode used by the test.

<mark type="bullet_intro">File Size</b>

User can specify a custom file size using the /Z command-line option. User can append one of the following to specify various sizes:

1.  K - For KB

2.  M – For MB

3.  G – For GB

4.  T – For TB

<mark type="bullet_intro">Pending I/O</b>

When using asynchronous I/O mode, the user can specify maximum number of I/O requests to keep pending before waiting for the completion of issued I/O requests. This can be done using /R &lt;number&gt; command-line option. For example, /R 1K would mean that the test keeps issuing new I/O requests until 1000 non-completed I/Os.

<mark type="bullet_intro">File Flags</b>

Test creates a file handle using FS APIs before starting the IOs on a given path. And user can create various IO patterns using following file flags:

1.  <mark type="bullet_intro">/FD – FILE\_FLAG\_DELETE\_ON\_CLOSE</b> This option is an indication to the respective FS that once the last handle on the file closes, the given file must be deleted. The test supports this flag only during read/verify operation.

2.  <mark type="bullet_intro">/FS – FILE\_FLAG\_SEQUENTIAL\_SCAN</b> File system flag to optimize file caching. It shows that the access is intended to be sequential from beginning to the end. This flag has no effect if the respective file system doesn’t support cached I/O.

3.  <mark type="bullet_intro">/FR – FILE\_FLAG\_RANDOM\_ACCESS</b> File system flag to optimize file caching. It shows that the access is intended to be random.

4.  <mark type="bullet_intro">/FW – FILE\_FLAG\_WRITE\_THROUGH</b> When used, write operations will not use any intermediate cache and would be served directly to the disk.

5.  <mark type="bullet_intro">/FU – FILE\_FLAG\_NO\_BUFFERING</b> When used, it is an instruction to the file system that the file or device is being opened with no system caching for data reads and writes.

<mark type="bullet_intro">Block Size</b>

The test performs a given I/O with the provided block size. The default block size value is 64K. User can specify different block size using /B command line option.

For example, /B 1M means that user wants to perform single I/O of 1MB.

<mark type="bullet_intro">Debug Break</b>

If user is running the test with the Windows Debugger attached to the system, the /D command-line option can be used to indicate the test to break into debugger (and in a way freeze the system in given state) when an expected error occurs in the test. The test would use this as a hint and breaks into debugger when an expected error is received during write and read/verify operation as well as when read data doesn’t match with expected data during read/verify operation.

## Command usage

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>rapidfile.exe test.dat /D /Z [FILE_SIZE] /R 16k</strong></p></td>
<td><p>Async Write</p></td>
</tr>
<tr class="even">
<td><p><strong>rapidfile.exe test.dat /V /D /FD /Z [FILE_SIZE] /R 16k</strong></p></td>
<td><p>Verify of Async Read</p></td>
</tr>
<tr class="odd">
<td><p><strong>rapidfile.exe test.dat /D /Z [FILE_SIZE] /SYNC</strong></p></td>
<td><p>Sync Write</p></td>
</tr>
<tr class="even">
<td><p><strong>rapidfile.exe test.dat /V /D /FD /Z [FILE_SIZE] /SYNC</strong></p></td>
<td><p>Verify of Sync Read</p></td>
</tr>
<tr class="odd">
<td><p><strong>rapidfile.exe test.dat /D /Z [FILE_SIZE] /FU /R 16K</strong></p></td>
<td><p>Async Unbuffered Write</p></td>
</tr>
<tr class="even">
<td><p><strong>rapidfile.exe test.dat /FU /V /D /FD /Z [FILE_SIZE] /R 16K</strong></p></td>
<td><p>Verify of Async Unbuffered Read</p></td>
</tr>
<tr class="odd">
<td><p><strong>rapidfile.exe test.dat /D /Z [FILE_SIZE] /FR /R 16K</strong></p></td>
<td><p>Random Access Async Write</p></td>
</tr>
<tr class="even">
<td><p><strong>rapidfile.exe test.dat /FR /V /D /FD /Z [FILE_SIZE] /R 16K</strong></p></td>
<td><p>Verify of Random Access Async Read</p></td>
</tr>
</tbody>
</table>

## Command syntax

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Command option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>rapidfile.exe</p></td>
<td><p>The command line options for the test are listed below.</p></td>
</tr>
<tr class="even">
<td><p>/?</p></td>
<td><p>Displays the help.</p></td>
</tr>
<tr class="odd">
<td><p>/PERF</p></td>
<td><p>Logs the results to the file system performance database/</p></td>
</tr>
<tr class="even">
<td><p>/A</p></td>
<td><p>Append to existing file.</p>
<p>Default value: Do not append</p></td>
</tr>
<tr class="odd">
<td><p>/B #</p></td>
<td><p>Block size. You can append k, m, g, or t.</p>
<p>Default value: 64k</p></td>
</tr>
<tr class="even">
<td><p>/C</p></td>
<td><p>Prints checksum. Also exits with checksum as return value.</p></td>
</tr>
<tr class="odd">
<td><p>/CM</p></td>
<td><p>Compress file with default compression format.</p></td>
</tr>
<tr class="even">
<td><p>/D</p></td>
<td><p>Break into the debugger if an unexpected error happens.</p></td>
</tr>
<tr class="odd">
<td><p>/E #</p></td>
<td><p>Sleep for # milliseconds in between read/write issue.</p></td>
</tr>
<tr class="even">
<td><p>/FD</p></td>
<td><p>FILE_FLAG_DELETE_ON_CLOSE (only valid with read/verify operation).</p></td>
</tr>
<tr class="odd">
<td><p>/FS</p></td>
<td><p>FILE_FLAG_SEQUENTIAL_SCAN</p></td>
</tr>
<tr class="even">
<td><p>/FW</p></td>
<td><p>FILE_FLAG_WRITE_THROUGH</p></td>
</tr>
<tr class="odd">
<td><p>/FU</p></td>
<td><p>FILE_FLAG_NO_BUFFERING</p></td>
</tr>
<tr class="even">
<td><p>/FR</p></td>
<td><p>FILE_FLAG_RANDOM_ACCESS</p></td>
</tr>
<tr class="odd">
<td><p>/H</p></td>
<td><p>Create disk or volume device handle instead of file handle.</p></td>
</tr>
<tr class="even">
<td><p>/I</p></td>
<td><p>Use idle priority.</p></td>
</tr>
<tr class="odd">
<td><p>/L #</p></td>
<td><p>Log statistics every # of seconds.</p>
<p>Default value: 60</p></td>
</tr>
<tr class="even">
<td><p>/M #</p></td>
<td><p>Number of minutes to run the test. This will run write followed by read/verify operations.</p></td>
</tr>
<tr class="odd">
<td><p>/N</p></td>
<td><p>Uses a new handle for every I/O.</p></td>
</tr>
<tr class="even">
<td><p>/NL</p></td>
<td><p>Don't log anything to the debugger.</p></td>
</tr>
<tr class="odd">
<td><p>/O</p></td>
<td><p>Overwrite existing file.</p></td>
</tr>
<tr class="even">
<td><p>/P #</p></td>
<td><p>Pattern size. You can append k, m, g, or t.</p>
<p>Default value: 4m</p></td>
</tr>
<tr class="odd">
<td><p>/R #</p></td>
<td><p>Maximum number of pending requests.</p></td>
</tr>
<tr class="even">
<td><p>/RT #</p></td>
<td><p>Time out interval in milliseconds while retrying on error. Other formats are #s, #m, #h for seconds, minutes and hours respectively.</p></td>
</tr>
<tr class="odd">
<td><p>/S</p></td>
<td><p>Use simple pattern for I/O operation.</p></td>
</tr>
<tr class="even">
<td><p>/SO</p></td>
<td><p>Starting offset for a disk or volume device.</p></td>
</tr>
<tr class="odd">
<td><p>/SP</p></td>
<td><p>Make the file sparse before writing to it.</p></td>
</tr>
<tr class="even">
<td><p>/SYNC</p></td>
<td><p>Synchronously write to the file (/TC /R cannot be specified).</p></td>
</tr>
<tr class="odd">
<td><p>/TC #</p></td>
<td><p>Number of completer threads.</p>
<p>Default value: 1 for create and 4 for verify</p></td>
</tr>
<tr class="even">
<td><p>/TQ #</p></td>
<td><p>Number of queueing threads.</p>
<p>Default value: 1</p></td>
</tr>
<tr class="odd">
<td><p>/V</p></td>
<td><p>Verify the file by reading it back.</p>
<p>Default value: no verify</p></td>
</tr>
<tr class="even">
<td><p>/X</p></td>
<td><p>Flush the file after creating.</p></td>
</tr>
<tr class="odd">
<td><p>/Z #</p></td>
<td><p>Size of the test file. You can append k, m, g, or t.</p>
<p>Default value: 10m</p></td>
</tr>
<tr class="even">
<td><p>/VDL #</p></td>
<td><p>Location to push VDL out to before starting to write (default == 0, -1 == FileSize).</p></td>
</tr>
<tr class="odd">
<td><p>/EOF #</p></td>
<td><p>Location to push EOF out to before starting to write(default == 0, -1 == FileSize).</p></td>
</tr>
</tbody>
</table>

>[!NOTE]
For command-line help for this test binary, type **/?**.


## File list

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>File</th>
<th>Location</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>rapidfile.exe</p></td>
<td><p><placeholder>&lt;testbinroot&gt;</placeholder>\NTTEST\Basetest\core_file_services\Shared_Tests\Wdk\</p></td>
</tr>
<tr class="even">
<td><p>ntlog.dll</p></td>
<td><p><placeholder>&lt;osbinroot&gt;</placeholder>\NTTest\CommonTest\NtLog\</p></td>
</tr>
<tr class="odd">
<td><p>ntlogger.ini</p></td>
<td><p><placeholder>&lt;osbinroot&gt;</placeholder>\NTTest\CommonTest\NtLog\</p></td>
</tr>
<tr class="even">
<td><p>dtresslog.dll</p></td>
<td><p><placeholder>&lt;testbinroot&gt;</placeholder>\NTTest\basetest\core_file_services\shared_libs\</p></td>
</tr>
</tbody>
</table>

## Parameters

| Parameter name                                   | Parameter description |
|--------------------------------------------------|-----------------------|
| <mark type="bullet_intro">LLU\_NetAccessOnly</b> |                       |
| <mark type="bullet_intro">FILE\_SIZE</b>         |                       |





