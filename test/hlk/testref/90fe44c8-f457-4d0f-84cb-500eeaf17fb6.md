---
title: Thin Provisioning Performance Test - RAW Disk (LOGO)
Description: Thin Provisioning Performance Test - RAW Disk (LOGO)
ms.assetid: 06fc30e9-2aa6-4228-872d-fbcd0f460f0c
author: sapaetsc-msft
ms.author: sapaetsc
ms.date: 08/28/17
ms.topic: article
ms.prod: windows-hardware
ms.technology: windows-oem
---

# Thin Provisioning Performance Test - RAW Disk (LOGO)

<conditional_block> <conditions> <docset value="standalone"></docset> </conditions>

>[!NOTE]
You can find the latest version of this test documentation on MSDN at the following link:

-   <xref hlink="http://msdn.microsoft.com/en-us/library/windows/hardware/06fc30e9-2aa6-4228-872d-fbcd0f460f0c">http://msdn.microsoft.com/en-us/library/windows/hardware/06fc30e9-2aa6-4228-872d-fbcd0f460f0c</b>


</conditional_block>

This test verifies that target devices that have a thin provisioning feature meet WindowsÂ® requirements.

>[!NOTE]
This test applies to test that run against raw hard disks. Thin Provisioning Performance Test - RAW Disk (LOGO) collects performance data over raw disks.


## Test details

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><mark type="bullet_intro">Specifications</b></td>
<td><ul>
<li>Device.Storage.Hd.ThinProvisioning.BasicFunction</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Platforms</b></td>
<td><ul>
<li><tla rid="win_threshold_server"></tla> x64</li>
</ul></td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Supported Releases</b></td>
<td><ul>
<li><tla rid="win_10"></tla></li>
<li><tla rid="win_10_th2"></tla></li>
<li><tla rid="win_10_rs1"></tla></li>
<li>Windows 10, version 1703</li>
<li>Windows 10, version 1709</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Expected run time (in minutes)</b></td>
<td>90</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Category</b></td>
<td>Benchmark</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Timeout (in minutes)</b></td>
<td>90</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Requires reboot</b></td>
<td>false</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Requires special configuration</b></td>
<td>false</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Type</b></td>
<td>automatic</td>
</tr>
</tbody>
</table>

## Additional documentation

Tests in this feature area might have additional documentation, including prerequisites, setup, and troubleshooting information, that can be found in the following topic(s):

-   <xref rid="p_hlk_test.device_storage_additional_documentation">Device.Storage additional documentation</b>

## Running the test

Before you run the test, complete the test setup as described in the test requirements: <xref rid="p_hlk_test.hard_disk_drive_testing_prerequisites">Hard Disk Drive Testing Prerequisites</b>.

In addition, before you run the test, please create a thin provisioned LUN and a full provisioned LUN and make sure both LUNs are online initialized raw disks. Set the threshold for thin provisioned LUN to be 70 percent.

## Troubleshooting

For generic troubleshooting of HLK test failures, see <xref rid="p_hlk.troubleshooting_windows_hlk_test_failures">Troubleshooting Windows HLK Test Failures</b>.

For troubleshooting information, see <xref rid="p_hlk_test.troubleshooting_devicestorage_testing">Troubleshooting Device.Storage Testing</b>.

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Error</th>
<th>Description/Workaround</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Thin provisioned LUN or full provisioned LUN throughput is 0.000000</p></td>
<td><p>If the log file shows that thin provisioned LUN and/or full provisioned LUN read/write throughput is 0.000000, then the LUNs might be offline. Check the thin/full provisioned LUNs to make sure they are both online when the test runs.</p></td>
</tr>
<tr class="even">
<td><p>Thin provisioned LUN throughput is less than 90% of full provisioned LUN</p></td>
<td><p>If the log file shows that the thin provisioned LUN read/write throughput is less than 90 percent of full provisioned LUN, check the thin provisioned LUN IO implementation. Thin provisioned LUN should have similar throughput as full provisioned LUN.</p></td>
</tr>
<tr class="odd">
<td><p>Failed to find certain system events</p></td>
<td><p>If the log file shows that the test failed to find certain events, check the implementation of threshold notification events and permanent resource exhaustion event in <xref hlink="http://go.microsoft.com/fwlink/?LinkID=309287">Plan and Deploy Thin Provisioning</b>.</p></td>
</tr>
<tr class="even">
<td><p>Test failed but logs have no failures</p></td>
<td><p>Make sure you are logging in the HLK client machine as Administrator while the test is running.</p></td>
</tr>
</tbody>
</table>

## More information

The performance test runs a stress test to collect performance data. IO throughout performance of thin provisioned LUN should not be below 90% of IO throughput performance of a full provisioned LUN. Currently, if the test fails, the logo test does not fail.

Performance test needs to run DiskIO test over thin provisioned LUN and full provisioned LUN to collect the statistics data. It does sequential read/write/verify IO and random read/write/version IO operations for both LUNs. After each round of writing, the test unmaps or formats the LUNs. The test starts a process to run **DiskIOV2.exe** and parse the xml files to collect data. After each round of tests, the test checks to see if there is any system event for threshold notification hit.

The test also checks the system events to get threshold notification and performance resource exhaustion. The following events are checked:

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Event ID</th>
<th>Information</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>144</p></td>
<td><p>Threshold notification without additional information</p></td>
</tr>
<tr class="even">
<td><p>145</p></td>
<td><p>Threshold notification without specific information</p></td>
</tr>
<tr class="odd">
<td><p>146</p></td>
<td><p>Threshold notification with used LUN capacity and available LUN capacity information</p></td>
</tr>
<tr class="even">
<td><p>147</p></td>
<td><p>Threshold notification with used LUN capacity and available pool capacity information</p></td>
</tr>
<tr class="odd">
<td><p>148</p></td>
<td><p>Threshold notification with used pool capacity and available LUN capacity information</p></td>
</tr>
<tr class="even">
<td><p>149</p></td>
<td><p>Threshold notification with used pool capacity and available pool capacity information</p></td>
</tr>
<tr class="odd">
<td><p>150</p></td>
<td><p>Permanent resource exhaustion event</p></td>
</tr>
</tbody>
</table>

This is a pass-only test. It will not give errors even if the disks (either thin provisioned LUN or full provisioned LUN) goes offline. The test only prints information to help you maintain the performance of a thin provisioned LUN.

## Command syntax

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Command option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>Thinprovision.exe /scenario performance /thindisk: [TPDiskDeviceObjLink] /fulldisk [FPDiskDeviceObjLink] /logo</strong></p></td>
<td><p>Runs the test.</p></td>
</tr>
</tbody>
</table>

>[!NOTE]
For command line help for this test binary, type **/h**.


## File list

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>File</th>
<th>Location</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>DiskIO.exe</p></td>
<td><p><placeholder>&lt;[testbinroot]&gt;</placeholder>\nttest\DRIVERSTEST\storage\wdk\</p></td>
</tr>
<tr class="even">
<td><p>FillVolume.exe</p></td>
<td><p><placeholder>&lt;[testbinroot]&gt;</placeholder>\nttest\DRIVERSTEST\storage\wdk\thinprovision\</p></td>
</tr>
<tr class="odd">
<td><p>StorageDevices.dll</p></td>
<td><p><placeholder>&lt;[testbinroot]&gt;</placeholder>\nttest\\DRIVERSTEST\storage\wdk\</p></td>
</tr>
<tr class="even">
<td><p>Thinprovision.exe</p></td>
<td><p><placeholder>&lt;[testbinroot]&gt;</placeholder>\nttest\DRIVERSTEST\storage\wdk\thinprovision\</p></td>
</tr>
</tbody>
</table>

## Parameters

| Parameter name                                    | Parameter description          |
|---------------------------------------------------|--------------------------------|
| <mark type="bullet_intro">WDKDeviceID</b>         |                                |
| <mark type="bullet_intro">TPDiskDeviceObjLink</b> | The thin provisioned LUN       |
| <mark type="bullet_intro">FPDiskDeviceObjLink</b> | The full provisioned LUN       |
| <mark type="bullet_intro">LLU\_NetAccessOnly</b>  |                                |
| <mark type="bullet_intro">LLU\_LclAdminUsr</b>    |                                |
| <mark type="bullet_intro">Destructive</b>         | (0,1) 0=Passive, 1=Destructive |





