---
title: Redfish Basic Tests
Description: Redfish Basic Tests
ms.assetid: ef6256ba-532f-4700-badb-1befd79e9d1c
author: sapaetsc-msft
ms.author: sapaetsc
ms.date: 08/28/17
ms.topic: article
ms.prod: windows-hardware
ms.technology: windows-oem
---

# Redfish Basic Tests

<conditional_block> <conditions> <docset value="standalone"></docset> </conditions>

>[!NOTE]
You can find the latest version of this test documentation on MSDN at the following link:

-   <xref hlink="http://msdn.microsoft.com/en-us/library/windows/hardware/ef6256ba-532f-4700-badb-1befd79e9d1c">http://msdn.microsoft.com/en-us/library/windows/hardware/ef6256ba-532f-4700-badb-1befd79e9d1c</b>


</conditional_block>

This manual test verifies server hardware out-of-band management capability using the Distributed Management Task Force (DMTF) Redfish standard and Windows PowerShell.

## Test details

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><mark type="bullet_intro">Specifications</b></td>
<td><ul>
<li>System.Server.BMC.Redfish.Basic</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Platforms</b></td>
<td><ul>
<li><tla rid="win_threshold_server"></tla> x64</li>
</ul></td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Supported Releases</b></td>
<td><ul>
<li><tla rid="win_10_th2"></tla></li>
<li><tla rid="win_10_rs1"></tla></li>
<li>Windows 10, version 1703</li>
<li>Windows 10, version 1709</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Expected run time (in minutes)</b></td>
<td>5</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Category</b></td>
<td>Scenario</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Timeout (in minutes)</b></td>
<td>5</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Requires reboot</b></td>
<td>false</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Requires special configuration</b></td>
<td>false</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Type</b></td>
<td>automatic</td>
</tr>
</tbody>
</table>

## Additional documentation

Tests in this feature area might have additional documentation, including prerequisites, setup, and troubleshooting information, that can be found in the following topic(s):

-   <xref rid="p_hlk_test.system_server_additional_documentation">System.Server additional documentation</b>

## Running the test

>[!NOTE]
The target Redfish server that is going through the certification process must be on the same network as the Windows-based computer where the client-side tests will run.


The tests require two computers:

-   Redfish client – A Windows-based computer selected in HLK Studio. The HLK job runs on this computer after the job is manually scheduled. The HLK job starts a Windows PowerShell process that loads the Pester test framework. The test framework then runs the actual test file, Pester.Redfish.HLK.Tests.ps1.
-   Redfish server – A remote Redfish-compatible device that these tests verify. You must specify the IP address and credential information of this device as parameters when you schedule a test on the Redfish client.

## Troubleshooting

For generic troubleshooting of HLK test failures, see <xref rid="p_hlk.troubleshooting_windows_hlk_test_failures">Troubleshooting Windows HLK Test Failures</b>.

**Error:** The Execute Task with Commandline cmd /c powershell.exe -c ... Failed with ExitCode <placeholder>N</placeholder>

The task exited with an exit code other than the <placeholder>ExpectedTaskExitCode</placeholder>. This may cause the task to fail if it is set to <placeholder>Fail On Exit Code</placeholder>.

The exit code of the Windows PowerShell process indicates the number of test failures. For a successful test run, <placeholder>ExpectedTaskExitCode</placeholder> is set to **0**. A non-zero value (for example, “Failed with ExitCode 3”) indicates the corresponding number of failed tests.

**Workaround:**

1.  Identify what tests failed by using either of the following methods:

    -   Review the log file RedfishTestRunLog.xml.
    -   Manually run the tests again in a Windows PowerShell console on the Redfish client computer.

2.  Debug the failed tests by using Windows PowerShell ISE on the Redfish client computer.

## More information

>[!NOTE]
When scheduling these tests, you must always specify values for the RedfishUri, RedfishUserName, and RedfishPassword parameters. The tests will fail if the default values are not replaced.

The TestDestFolder, RedfishMetadataUri, and AdditionalData parameters do not need to be changed for the tests to succeed.


**Manually run the tests in a Windows PowerShell console**

Note that the test files are located on the Redfish client computer in a folder specified by the \[TestDestFolder\] parameter. By default, this is \[SYSTEMDRIVE\]\\RedfishLogo.

1.  Ensure that the Redfish.Device.Config.json file (in the folder specified by the \[TestDestFolder\] parameter) has the correct information about the Redfish server. If this file is missing, run the following Windows PowerShell command to generate the file. In the command, replace the parameter values with what is used by the Redfish server.

    `PS C:\Users\Administrator> C:\RedfishLogo\CreateRedfishDeviceConfig.ps1 -RedfishUri 'https://10.20.30.40' -RedfishUserName 'root' -RedfishPassword 'testpass'`

2.  Load the Pester Windows PowerShell module. This is a Windows PowerShell-based test harness.

    `Import-Module Pester –Force`

3.  Run the tests.

    `PS C:\Users\Administrator> C:\RedfishLogo\Pester.Redfish.HLK.Tests.ps1`

    The failed tests will be highlighted in red.

**Debug the failed tests in Windows PowerShell ISE**

Note that the test files are located on the Redfish client computer in a folder specified by the \[TestDestFolder\] parameter. By default, this is \[SYSTEMDRIVE\]\\RedfishLogo.

1.  Start Windows PowerShell ISE from the Start menu.
2.  Ensure that the Redfish.Device.Config.json file has correct information about the Redfish server. If this file is missing, run the following Windows PowerShell command to generate the file. In the command, replace the parameter values with what is used by the Redfish server.

    `PS C:\Users\Administrator> C:\RedfishLogo\CreateRedfishDeviceConfig.ps1 -RedfishUri 'https://10.20.30.40' -RedfishUserName 'root' -RedfishPassword 'testpass'`

3.  Load the Pester Windows PowerShell module in the Windows PowerShell ISE command window. This is a Windows PowerShell-based test harness.

    `Import-Module Pester –Force`

4.  In Windows PowerShell ISE, open the test file (press Ctrl + O) \[TestDestFolder\]\\Pester.Redfish.HLK.Tests.ps1.
5.  Find the code for the failing test. Individual tests are marked by the **It** keyword (for example, **It "Verify that service meets Redfish Authentication requirements for different resources."**)
6.  Set a breakpoint in the failing test. To do this, put the cursor on the first line of the test, and then press F9 (Toggle Breakpoint).
7.  Press F5 (Run Script) to run the tests. The test run should stop on the breakpoint that you set in the previous step.
8.  Use commands from the **Debug** menu to step through the code and investigate errors. See <xref hlink="https://msdn.microsoft.com/powershell/scripting/core-powershell/ise/how-to-debug-scripts-in-windows-powershell-ise">How to Debug Scripts in Windows PowerShell ISE</b> on MSDN.

## Parameters

| Parameter name                                   | Parameter description                                             |
|--------------------------------------------------|-------------------------------------------------------------------|
| <mark type="bullet_intro">TestDestFolder</b>     | Folder where test content will be deployed on the client machine. |
| <mark type="bullet_intro">RedfishUri</b>         | Uri of Redfish service                                            |
| <mark type="bullet_intro">RedfishMetadataUri</b> | Uri of Redfish service metadata                                   |
| <mark type="bullet_intro">RedfishUserName</b>    | User that has access to Redfish service                           |
| <mark type="bullet_intro">RedfishPassword</b>    | Password of user that has access to Redfish service               |
| <mark type="bullet_intro">AdditionaData</b>      | Any additional data that needs to be passed to tests              |





