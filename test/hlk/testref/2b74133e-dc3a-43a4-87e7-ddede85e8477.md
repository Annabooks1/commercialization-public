---
title: Syscache (SYSTEM)
Description: Syscache (SYSTEM)
ms.assetid: 1d64e27f-2bd6-4866-b5b9-4f5479e86df8
author: sapaetsc-msft
ms.author: sapaetsc
ms.date: 08/28/17
ms.topic: article
ms.prod: windows-hardware
ms.technology: windows-oem
---

# Syscache (SYSTEM)

<conditional_block> <conditions> <docset value="standalone"></docset> </conditions>

>[!NOTE]
You can find the latest version of this test documentation on MSDN at the following link:

-   <xref hlink="http://msdn.microsoft.com/en-us/library/windows/hardware/1d64e27f-2bd6-4866-b5b9-4f5479e86df8">http://msdn.microsoft.com/en-us/library/windows/hardware/1d64e27f-2bd6-4866-b5b9-4f5479e86df8</b>


</conditional_block>

This is a data validation test that runs on the system volume. It writes to a file and verifies that the data written is read back correctly. It can detect corruptions caused by anything in the path from firmware, drivers, file system, memory, etc. It uses standard Win32 file system and memory management APIs to read and write data from the file.

## Test details

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><mark type="bullet_intro">Specifications</b></td>
<td><ul>
<li>System.Fundamentals.StorageAndBoot.BootPerformance</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Platforms</b></td>
<td><ul>
<li><tla rid="win_threshold_desktop"></tla> x86</li>
<li><tla rid="win_threshold_desktop"></tla> x64</li>
</ul></td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Supported Releases</b></td>
<td><ul>
<li><tla rid="win_10"></tla></li>
<li><tla rid="win_10_th2"></tla></li>
<li><tla rid="win_10_rs1"></tla></li>
<li>Windows 10, version 1703</li>
<li>Windows 10, version 1709</li>
</ul></td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Expected run time (in minutes)</b></td>
<td>15</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Category</b></td>
<td>Scenario</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Timeout (in minutes)</b></td>
<td>15</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Requires reboot</b></td>
<td>false</td>
</tr>
<tr class="even">
<td><mark type="bullet_intro">Requires special configuration</b></td>
<td>false</td>
</tr>
<tr class="odd">
<td><mark type="bullet_intro">Type</b></td>
<td>automatic</td>
</tr>
</tbody>
</table>

## Additional documentation

Tests in this feature area might have additional documentation, including prerequisites, setup, and troubleshooting information, that can be found in the following topic(s):

-   <xref rid="p_hlk_test.system_fundamentals_additional_documentation">System.Fundamentals additional documentation</b>

## Running the test

Before you run the test, complete the test setup as described in the test requirements: <xref rid="p_hlk_test.wdtf_system_fundamentals_testing_prerequisites">WDTF System Fundamentals Testing Prerequisites</b>.

## Troubleshooting

For generic troubleshooting of HLK test failures, see <xref rid="p_hlk.troubleshooting_windows_hlk_test_failures">Troubleshooting Windows HLK Test Failures</b>.

For troubleshooting information, see <xref rid="p_hlk_test.troubleshooting_system_fundamentals_testing">Troubleshooting System Fundamentals Testing</b>.

When the test fails, the log contains all of the information you need to analyze the failure. Look for the following information to reproduce the error:

-   The "Write Attribute". Look up the table of write attributes to find how the data was written to the file.

-   The "Read Attribute". Look up the table of read attributes to find out how the data was read back from the file.

-   The offset at which the error occurred.

-   The region of the file in which the error occurred. The test typically writes entire region using a single write (with the exception of the FILE\_FLAG\_SECTOR\_CHUNKS option, where it writes one sector at a time).

## More information

Syscache opens a file with a certain flag/attribute and writes to the file. Each chosen flag may span several runs on the file.

A run is defined as a set of the following sequence:

-   Create/open a file.

-   Truncate the file size to 0.

-   Write to the file.

-   Close the file.

-   Open the file again.

-   Read the file.

-   Verify the contents of the file.

-   Close the file.

There is a set of zero and non-zero regions in the file. Zero regions are areas in the file where no data was written. Non-zero regions are areas in the file where data was written. The pattern is a DWORD of the format RRPPPPPP. The top two bytes are the run number, and the next 3 bytes are the one's complement of the offset of this DWORD in the file.

The following attributes are used for writing a file:

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Write attribute</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>FILE_ATTRIBUTE_NORMAL</p></td>
<td><p>See <xref hlink="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx">CreateFile function</b>.</p></td>
</tr>
<tr class="even">
<td><p>FILE_FLAG_SEQUENTIAL_SCAN</p></td>
<td><p>See <xref hlink="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx">CreateFile function</b>.</p></td>
</tr>
<tr class="odd">
<td><p>FILE_FLAG_NO_BUFFERING</p></td>
<td><p>See <xref hlink="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx">CreateFile function</b>.</p></td>
</tr>
<tr class="even">
<td><p>FILE_FLAG_WRITE_THROUGH</p></td>
<td><p>See <xref hlink="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx">CreateFile function</b>.</p></td>
</tr>
<tr class="odd">
<td><p>FILE_ATTRIBUTE_TEMPORARY</p></td>
<td><p>See <xref hlink="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx">CreateFile function</b>.</p></td>
</tr>
<tr class="even">
<td><p>NO_BUFFERING | WRITE_THROUGH</p></td>
<td><p>See <xref hlink="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx">CreateFile function</b>.</p></td>
</tr>
<tr class="odd">
<td><p>FILE_ATTRIBUTE_SPARSE_FILE</p></td>
<td><p>The file is set to sparse.</p></td>
</tr>
<tr class="even">
<td><p>NORMAL APPEND_WRITE</p></td>
<td><p>Same as FILE_ATTRIBUTE_NORMAL; closes and reopening the file per write and appending the next region.</p></td>
</tr>
<tr class="odd">
<td><p>FILE_FLAG_SECTOR_CHUNKS</p></td>
<td><p>Same as FILE_FLAG_NO_BUFFERING, data is written one sector at a time.</p></td>
</tr>
<tr class="even">
<td><p>FILE_MAP</p></td>
<td><p>Same as FILE_ATTRIBUTE_NORMAL, data is written via memory mapping.</p></td>
</tr>
<tr class="odd">
<td><p>FILE_FLAG_OVEREXTEND</p></td>
<td><p>Same as FILE_ATTRIBUTE_NORMAL, data is written via memory mapping</p></td>
</tr>
</tbody>
</table>

The following attributes are used for reading from the file:

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Read attribute</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>FILE_MAP</p></td>
<td><p>FILE_ATTRIBUTE_NORMAL, data is read via memory mapping</p></td>
</tr>
<tr class="even">
<td><p>NO_BUFFERING</p></td>
<td><p>FILE_FLAG_NO_BUFFERING</p></td>
</tr>
<tr class="odd">
<td><p>NORMAL</p></td>
<td><p>FILE_ATTRIBUTE_NORMAL</p></td>
</tr>
<tr class="even">
<td><p>RANDOM_ACCESS</p></td>
<td><p>FILE_FLAG_RANDOM_ACCESS</p></td>
</tr>
<tr class="odd">
<td><p>SEQUENTIAL_SCAN</p></td>
<td><p>FILE_FLAG_SEQUENTIAL_SCAN</p></td>
</tr>
<tr class="even">
<td><p>TEMPORARY</p></td>
<td><p>FILE_FLAG_TEMPORARY</p></td>
</tr>
<tr class="odd">
<td><p>WRITE_THROUGH</p></td>
<td><p>FILE_FLAG_WRITE_THROUGH</p></td>
</tr>
</tbody>
</table>

## Command syntax

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>readwrit.exe -n 10 -d /logfile Syscache.log</strong></p></td>
<td><p>Runs the test.</p></td>
</tr>
</tbody>
</table>

## File list

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>File</th>
<th>Location</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>readwrit.exe</p></td>
<td><p><placeholder>&lt;[testbinroot]&gt;</placeholder>\NTTest\BASETEST\core_file_services\cachemgr\</p></td>
</tr>
<tr class="even">
<td><p>ntlog.dll</p></td>
<td><p><placeholder>&lt;[osbinroot]&gt;</placeholder>\NTTest\CommonTest\NtLog\</p></td>
</tr>
<tr class="odd">
<td><p>ntlogger.ini</p></td>
<td><p><placeholder>&lt;[osbinroot]&gt;</placeholder>\NTTest\CommonTest\NtLog\</p></td>
</tr>
<tr class="even">
<td><p>stresslog.dll</p></td>
<td><p><placeholder>&lt;[testbinroot]&gt;</placeholder>\NTTest\basetest\core_file_services\shared_libs\</p></td>
</tr>
</tbody>
</table>

## Parameters

| Parameter name                                   | Parameter description |
|--------------------------------------------------|-----------------------|
| <mark type="bullet_intro">LLU\_NetAccessOnly</b> |                       |





