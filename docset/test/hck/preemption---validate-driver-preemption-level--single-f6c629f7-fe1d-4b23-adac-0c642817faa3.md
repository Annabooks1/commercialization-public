---
author: joshbax-msft
title: Preemption - Validate driver preemption level (single)
description: Preemption - Validate driver preemption level (single)
MSHAttr:
- 'PreferredSiteName:MSDN'
- 'PreferredLib:/library/windows/hardware'
ms.assetid: d6ae6da2-00c7-4c5b-b67a-b2ca9a776fad
---

# Preemption - Validate driver preemption level (single)


This automated test measures the time that it takes to preempt a specific workload on the test machine. The three supported levels of preemption are: no preemption, DMA boundary preemption, and middle of the DMA packet preemption. This test validates that the driver preempts according to its claim. The test also measures the times that preemptions take, relative to the associated DMA packets. DWM must be on to generate the preemption requests.

## Test details


<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><p><strong>Associated requirements</strong></p></td>
<td><p>Device.Graphics.WDDM12.Render.PreemptionGranularity</p>
<p>[See the device hardware requirements.](http://go.microsoft.com/fwlink/p/?linkid=254483)</p></td>
</tr>
<tr class="even">
<td><p><strong>Platforms</strong></p></td>
<td><p>Windows RT (ARM-based) Windows 8 (x64) Windows 8 (x86) Windows Server 2012 (x64) Windows RT 8.1 Windows 8.1 x64 Windows 8.1 x86 Windows Server 2012 R2</p></td>
</tr>
<tr class="odd">
<td><p><strong>Expected run time</strong></p></td>
<td><p>~2 minutes</p></td>
</tr>
<tr class="even">
<td><p><strong>Categories</strong></p></td>
<td><p>Certification Functional</p></td>
</tr>
<tr class="odd">
<td><p><strong>Type</strong></p></td>
<td><p>Automated</p></td>
</tr>
</tbody>
</table>

 

## Running the test


Before you run the test, complete the test setup as described in the test requirements: [Graphic Adapter or Chipset Testing Prerequisites](graphic-adapter-or-chipset-testing-prerequisites.md).

## Troubleshooting


For troubleshooting information, see [Troubleshooting Device.Graphics Testing](troubleshooting-devicegraphics-testing.md).

This preemption test generates workloads of ever-increasing sizes that show up as DMA packets on the hardware. The test generates a new size for each iteration through the main test loop. During each loop, the test also monitors the time that the DMA packets take to be serviced. This includes both the standard render packets and the preemption request packets. The test expects a preemption request to be generated by the system each time DMA needs to compose the screen for the user. For standard DMA boundary preemption, the test expects the preemption request packets run times to converge towards the DMA render packet run times, as the run times increase.

If an error is reported by the test, most details can be found in the associated xml file. Search for the error condition and review the information that is logged just before the error. The log file should describe what needs to be investigated.

If an error is reported by the test, if should be manually investigated by inspecting a trace file. We recommend that you create a trace file by using log.cmd that ships with GPUView.exe in the NT performance Toolkit. Make sure that preemption request packets are being generated and that no packets are getting preempted when DMA boundary preemption level is reported.

## More information


### Command syntax

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>GrowPrimitiveCount</p></td>
<td><p>Instructs test to grow its primitive count on each iteration through the loop (See iteration parameter).</p>
<p>Default value: Required</p></td>
</tr>
<tr class="even">
<td><p>Time</p></td>
<td><p>Defines the time of each loop (See iteration parameter).</p>
<p>Default value: 5</p></td>
</tr>
<tr class="odd">
<td><p>ppFrame</p></td>
<td><p>Count of Primitives Per Frame to use as a starting value.</p>
<p>Default value: 1</p></td>
</tr>
<tr class="even">
<td><p>Triangles</p></td>
<td><p>The number of triangles for the triangle list.</p>
<p>Default value: 1000</p></td>
</tr>
<tr class="odd">
<td><p>ppPrimitive</p></td>
<td><p>Pixels Per Primitive – defines the triangle size.</p>
<p>Default value: 500</p></td>
</tr>
<tr class="even">
<td><p>ShaderInstructions</p></td>
<td><p>Number of times to loop in the shader.</p>
<p>Default value: 2</p></td>
</tr>
<tr class="odd">
<td><p>Windowed</p></td>
<td><p>Instruct the test to run windowed rather than full screen.</p>
<p>Default value: True</p></td>
</tr>
<tr class="even">
<td><p>Iterations</p></td>
<td><p>Number of times to loop and grow the primitives.</p>
<p>Default value: 40</p></td>
</tr>
</tbody>
</table>

 

### File list

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>File</th>
<th>Location</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Dxgfault.exe</p></td>
<td><p><em>&lt;testbinroot&gt;</em>\nttest\windowstest\Graphics\wddm\bin\</p></td>
</tr>
<tr class="even">
<td><p>SchBillboard.exe</p></td>
<td><p><em>&lt;testbinroot&gt;</em>\nttest\windowstest\Graphics\wddm\bin\\</p></td>
</tr>
<tr class="odd">
<td><p>SchManager.exe</p></td>
<td><p><em>&lt;testbinroot&gt;</em>\nttest\windowstest\Graphics\wddm\bin\</p></td>
</tr>
<tr class="even">
<td><p>Surfboard.exe</p></td>
<td><p><em>&lt;testbinroot&gt;</em>\nttest\windowstest\Graphics\wddm\bin\</p></td>
</tr>
<tr class="odd">
<td><p>TdrDelayTimeLong.reg</p></td>
<td><p><em>&lt;testbinroot&gt;</em>\nttest\windowstest\Graphics\wddm\bin\</p></td>
</tr>
<tr class="even">
<td><p>TdrDelayTimeNormal.reg</p></td>
<td><p><em>&lt;testbinroot&gt;</em>\nttest\windowstest\Graphics\wddm\bin\</p></td>
</tr>
<tr class="odd">
<td><p>TdrLimitTimeLong.reg</p></td>
<td><p><em>&lt;testbinroot&gt;</em>\nttest\windowstest\Graphics\wddm\bin\</p></td>
</tr>
<tr class="even">
<td><p>TdrLimitTimeNormal.reg</p></td>
<td><p><em>&lt;testbinroot&gt;</em>\nttest\windowstest\Graphics\wddm\bin\</p></td>
</tr>
<tr class="odd">
<td><p>WGFPayloadTDR.exe</p></td>
<td><p><em>&lt;testbinroot&gt;</em>\nttest\windowstest\Graphics\wddm\bin\</p></td>
</tr>
</tbody>
</table>

 

## Related topics


[Graphic Adapter or Chipset Tests](graphic-adapter-or-chipset-tests.md)

 

 







